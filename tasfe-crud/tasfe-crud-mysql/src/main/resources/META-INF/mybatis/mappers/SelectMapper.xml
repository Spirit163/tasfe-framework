<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="selecter">

    <select id="_query" parameterType="map" resultType="hashmap">
        select
        <foreach item="column" index="index" collection="columns" separator=",">
            ${column}
        </foreach>
        from ${tableName}
        <where>
            <if test="whereExp != null">
                <foreach item="exp" index="index" collection="whereExp" separator=" ">
                    ${exp}
                </foreach>
            </if>
        </where>

        <if test="orderExp != null">
            order by ${orderExp}
        </if>

        <if test="limit != null">
            limit #{limit.start},#{limit.offset}
        </if>
    </select>


    <select id="_find" parameterType="map" resultType="hashmap">
        select
        <foreach item="columnName" index="index" collection="queryColumn" separator=",">
            ${columnName}
        </foreach>
        from ${tableName}
        <where>

            <if test="pks != null">
                <foreach item="pk" index="index" collection="pks" separator="or">
                    id=${pk}
                </foreach>
            </if>

            <if test="conditionExp != null">
                ${conditionExp}
            </if>

            <if test="conditionParam != null">
                <foreach item="column" index="index" collection="conditionParam" separator="and">
                    ${index} = #{column}
                </foreach>
            </if>
        </where>

        <if test="orderExp != null">
            order by ${orderExp}
        </if>

        <if test="page != null">
            limit #{page.startRowNo},#{page.pageSize}
        </if>
    </select>


</mapper>